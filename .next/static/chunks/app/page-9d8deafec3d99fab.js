(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{54:a=>{a.exports={grid:"fenlei1_grid__gOPvw",div:"fenlei1_div__L6mQ2",div1:"fenlei1_div1___JXkN",div2:"fenlei1_div2__XTHYE",div3:"fenlei1_div3__dN3AF"}},127:(a,n,e)=>{Promise.resolve().then(e.bind(e,5460))},287:a=>{a.exports={xiaodaohang:"xiaodaohang_xiaodaohang__A8bTA",xiaodaohang1:"xiaodaohang_xiaodaohang1__yM_lG",xiaodaohang2:"xiaodaohang_xiaodaohang2__qcYIO",xiaodaohang3:"xiaodaohang_xiaodaohang3__dFSp7",xiaodaohang4:"xiaodaohang_xiaodaohang4__Vea4e",zhu:"xiaodaohang_zhu__QTMYS"}},1978:(a,n,e)=>{"use strict";let s;e.d(n,{P:()=>u});var i=e(5453),t=e(3464);let o=(a,n)=>({shangping:[],diaodu:!0,gianche:a=>{n().huanchun&&n().chongshi(a)},time:0,wangluo:!0,huanchun:[],chongshi:async e=>{let{huanchun:s}=n(),i=[...s].sort((a,n)=>a.banben-n.banben),o=i.find(a=>!1==a.is);for(let l of(console.log(o),i)){if(!n().diaodu)break;a({diaodu:!1});let i=async()=>{try{await t.A.post("/api/gouwuche?id=".concat(e),{id:o.key,chaozhuo:o.chaozhuo,banben:o.banben}).then(a=>console.log(a.data,"成功",s)),a({huanchun:n().huanchun.filter(a=>a.banben!=o.banben)}),a({diaodu:!0}),n().gianche(e)}catch(s){alert("超时，刷新浏览器试试"),"加"==o.chaozhuo?a(a=>({shangping:a.shangping.map(a=>a.id==o.key?{id:a.id,shu:a.shu-1,banben:a.banben}:a),chong:o})):a(a=>({shangping:a.shangping.map(a=>a.id==o.key?{id:a.id,shu:a.shu+1,banben:a.banben}:a),chong:o})),a({diaodu:!0}),n().gianche(e)}};setTimeout(()=>i(),3e3)}},settongbu:async()=>{let e=n().user;try{let n=await t.A.get("/api/gouwuche?id=".concat(e)).then(a=>a.data);console.log(n),n.ss&&(n.ss.shuju=n.ss.shuju.map(a=>({id:a.id,shu:a.shu,banben:-1})),console.log(n.ss.shuju),a(()=>({shangping:n.ss.shuju})))}catch(a){console.log(a)}},shangpingjia:async e=>{if(!n().wangluo||Date.now()-n().time<500)return;a(a=>{a.time=Date.now();let n=a.shangping.find(a=>a.id==e);return(console.log(n),n)?{shangping:a.shangping.map(a=>a.id==e?{id:e,shu:a.shu+1,banben:a.banben+1}:a)}:{shangping:[...a.shangping,{id:e,shu:1,banben:0}]}});let s=n().user,i=n().shangping.find(a=>a.id==e);try{await t.A.post("/api/gouwuche?id=".concat(s),{id:e,chaozhuo:"加",banben:i.banben}).then(a=>{a.data,console.log(a.data)})}catch(i){if(console.log(i),t.A.isAxiosError(i))if(409==i.request.status){var o,l;alert("超时，稍等"),console.log("版本冲突正在重试",null==(o=i.response)?void 0:o.data);let e=null==(l=i.response)?void 0:l.data;a(a=>({huanchun:[...a.huanchun,{is:!1,key:e.id,banben:e.kehubanben,oldbanben:e.banben,chaozhuo:e.chaozhuo}]})),console.log(n().huanchun),console.log(n().shangping),n().chongshi(s)}else alert("错误请重试"),a(a=>a.shangping.find(a=>a.id===e).shu<=1?{shangping:a.shangping.filter(a=>1!=a.shu)}:{shangping:a.shangping.map(a=>a.id==e?{id:e,shu:a.shu-1,banben:a.banben-1}:a)})}},shangpingjian:async e=>{if(n().shangping.find(a=>a.id==e).shu<=1)return alert("减不了了");if(!n().wangluo||Date.now()-n().time<500)return;a(a=>({shangping:a.shangping.map(a=>a.id==e?{id:e,shu:a.shu-1,banben:a.banben+1}:a)}));let s=n().user,i=n().shangping.find(a=>a.id==e);try{await t.A.post("/api/gouwuche?id=".concat(s),{id:e,chaozhuo:"减",banben:i.banben}).then(a=>{a.data,console.log(a.data)})}catch(i){if(console.log(i),t.A.isAxiosError(i))if(409==i.request.status){var o,l;console.log("版本冲突正在重试",null==(o=i.response)?void 0:o.data);let e=null==(l=i.response)?void 0:l.data;a(a=>({huanchun:[...a.huanchun,{is:!1,key:e.id,banben:e.kehubanben,oldbanben:e.banben,chaozhuo:e.chaozhuo}]})),console.log(n().huanchun),console.log(n().shangping),n().chongshi(s)}else alert("错误请重试"),a(a=>({shangping:a.shangping.map(a=>a.id==e?{id:e,shu:a.shu+1}:a)}))}}}),l=(a,n)=>({user:null,isLoggedIn:!1,log:()=>{a({isLoggedIn:!0}),n().settongbu(),t.A.post("/api/gouwuche?cz=1").then(a=>console.log(a.data))},logout:()=>a({isLoggedIn:!1,user:null}),setuser:n=>a({user:n})}),u=(0,i.v)((s=(a,n)=>({...o(a,n),...l(a,n)}),(a,n,e)=>s(n=>(window.addEventListener("offline",()=>a({wangluo:!1})),window.addEventListener("online",()=>a({wangluo:!0})),a(n)),n,e)))},2241:a=>{a.exports={shousuo:"top_shousuo__jWNzm",top:"top_top__qVwTk",geitupianyong:"top_geitupianyong__SlG9Y",shousuolan:"top_shousuolan__H6K3E",shousuoanliu:"top_shousuoanliu__GLvNR"}},4245:a=>{a.exports={shangping:"sangping_shangping__ERnef",text:"sangping_text__wrlyt",text1:"sangping_text1__0rfse"}},4513:a=>{a.exports={tupian:"tupian_tupian__AmXKw",tupian1:"tupian_tupian1__FHWW0",tupian2:"tupian_tupian2__qZVTS",tupian3:"tupian_tupian3__O6fDO",tupian4:"tupian_tupian4__5OeLA",tupian5:"tupian_tupian5__fmgMM",tupian6:"tupian_tupian6__IG6LO",tupian7:"tupian_tupian7__UiD3U",butt:"tupian_butt__giz9F",button:"tupian_button__Hs_St",zhu:"tupian_zhu__qisJn",lunbou:"tupian_lunbou__hHKPZ"}},5101:a=>{a.exports={zhu:"page_zhu__Ydpa4",daohang:"page_daohang__xt5dG",daohang1:"page_daohang1__y7IuO",daohang2:"page_daohang2__pqkYu",daohangbiaoqian:"page_daohangbiaoqian___ABzM",xiantext:"page_xiantext__cL_qj",jiantou:"page_jiantou__z0BFO",daohang3:"page_daohang3__UxqYJ",xiantext1:"page_xiantext1__YDmM0",xiantext2:"page_xiantext2__v6GOy"}},5460:(a,n,e)=>{"use strict";e.d(n,{default:()=>E});var s=e(5155),i=e(6766),t=e(5101),o=e.n(t),l=e(2241),u=e.n(l),c=e(287),r=e.n(c),h=e(54),d=e.n(h),g=e(3315),x=e(3464),_=e(2115);let p=function(a){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{throttleTime:e=800,debounceTime:s=500,threshold:i=300}=n,t=(0,_.useRef)(0),o=(0,_.useRef)(null),l=(0,_.useRef)(!0),u=(0,_.useRef)(0),c=(0,_.useCallback)(()=>{u.current=window.scrollY},[]);(0,_.useEffect)(()=>(window.addEventListener("beforeunload",c),l.current=!0,()=>{l.current=!1,window.removeEventListener("beforeunload",c),o.current&&clearTimeout(o.current)}),[c]);let r=(0,_.useCallback)(()=>{let{scrollTop:a,scrollHeight:n,clientHeight:e}=document.documentElement;return n-(a+e)<i},[i]),h=(0,_.useCallback)(()=>{l.current&&r()&&(t.current=Date.now(),a())},[a,r]),d=(0,_.useCallback)(()=>{c();let a=Date.now()-t.current;if(a<e){o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{h()},e-a+s);return}o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{h()},s)},[c,r,e,s,h]);(0,_.useEffect)(()=>{let a=()=>{requestAnimationFrame(d)};return window.addEventListener("scroll",a,{passive:!0}),()=>window.removeEventListener("scroll",a)},[d])};var m=e(4245),b=e.n(m);function j(a){let{product:n}=a;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:b().shangping,children:[(0,s.jsx)("div",{className:b().text,children:n.name}),(0,s.jsx)("div",{className:b().text1,children:n.miaoshu})]})})}var f=e(6874),N=e.n(f);let v=a=>x.A.get(a).then(a=>a.data),w=(a,n)=>"/api/shuju?page=".concat(a+1);function y(){let{data:a,error:n,size:e,setSize:i}=(0,g.Ay)(w,v,{revalidateFirstPage:!1,parallel:!0}),t=(null==a?void 0:a.flatMap(a=>a.shuju))||[];return p(()=>{i(e+1)}),(0,s.jsx)(s.Fragment,{children:t.map(a=>(0,s.jsx)(N(),{href:"/about/xiangqing/"+a.id,children:(0,s.jsx)(j,{product:a})},a.id))})}var k=e(4513),q=e.n(k);function z(){let[a,n]=(0,_.useState)(0),e=(0,_.useRef)(!0),[i,t]=(0,_.useState)({});(0,_.useRef)(null);let o=()=>e.current=!0,l=()=>e.current=!1,u=q().lunbou;(0,_.useEffect)(()=>{let a=setInterval(()=>{e.current&&n(a=>a+1)},5e3);return()=>clearInterval(a)},[e.current]),(0,_.useEffect)(()=>{t({transform:"translateY(-".concat(100*a,"%)"),transition:"transform 0.5s ease-in-out"}),5==a&&setTimeout(()=>(t({transform:"translateY(-".concat(0,"%)"),transition:"none"}),setTimeout(()=>n(0),100)),500)},[a]);let c=a=>{t({transform:"translateY(-".concat(100*a,"%)"),transition:"transform 0.5s ease-in-out"}),setTimeout(()=>{n(a)},500)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:q().tupian,onMouseOver:()=>{l(),console.log("关",a,console.log(e.current))},onMouseLeave:()=>{o(),console.log("开",a),console.log(e.current)},children:[(0,s.jsx)("a",{className:"".concat(q().tupian1),style:{...i}}),(0,s.jsx)("a",{className:q().tupian2,style:{...i}}),(0,s.jsx)("a",{className:q().tupian3,style:{...i}}),(0,s.jsx)("a",{className:q().tupian4,style:{...i}}),(0,s.jsx)("a",{className:q().tupian5,style:{...i}}),(0,s.jsx)("a",{className:q().tupian7,style:{...i}}),(0,s.jsxs)("ul",{className:q().zhu,children:[(0,s.jsx)("li",{className:"".concat(q().butt," ").concat(a+1==1?u:null," "),onClick:()=>c(0),children:(0,s.jsx)("button",{className:q().button})}),(0,s.jsx)("li",{className:"".concat(q().butt," ").concat(a+1==2?u:null," "),onClick:()=>c(1),children:(0,s.jsx)("button",{className:q().button})}),(0,s.jsx)("li",{className:"".concat(q().butt," ").concat(a+1==3?u:null," "),onClick:()=>c(2),children:(0,s.jsx)("button",{className:q().button})}),(0,s.jsx)("li",{className:"".concat(q().butt," ").concat(a+1==4?u:null," "),onClick:()=>c(3),children:(0,s.jsx)("button",{className:q().button})}),(0,s.jsx)("li",{className:"".concat(q().butt," ").concat(a+1==5?u:null," "),onClick:()=>c(4),children:(0,s.jsx)("button",{className:q().button})})]})]})})}var A=e(1978);function E(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:o().zhu,children:[(0,s.jsx)(F,{}),(0,s.jsx)(L,{}),(0,s.jsx)(T,{}),(0,s.jsxs)("div",{className:d().grid,children:[(0,s.jsx)(z,{}),(0,s.jsx)(C,{})]}),(0,s.jsx)(y,{})]})})}function F(){let[a,n]=(0,_.useState)(new Date),e=(0,_.useRef)(0),i=(0,_.useRef)(null),t=(0,A.P)(a=>a.user),l=(0,A.P)(a=>a.isLoggedIn),u=(0,A.P)(a=>a.logout);(0,_.useEffect)(()=>{let a=()=>{let s=new Date;n(s),i.current=setTimeout(()=>{e.current=requestAnimationFrame(a)},1e3-s.getMilliseconds())};return e.current=requestAnimationFrame(a),()=>{cancelAnimationFrame(e.current),clearTimeout(i.current)}},[]);let c="现在是北京时间:".concat(a.toLocaleTimeString("zh-CN")),r=6>a.getHours()||a.getHours()>18?"晚上好":a.getHours()>12?"下午好":"上午好";return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:o().daohang,children:(0,s.jsxs)("div",{className:o().daohang1,children:[(0,s.jsxs)("ul",{className:o().daohang2,children:[(0,s.jsx)("li",{className:o().daohangbiaoqian,children:"中国大陆"}),l?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("li",{className:"".concat(o().daohangbiaoqian),children:[t,"号用户,欢迎",(0,s.jsx)("div",{className:o().xiantext,children:(0,s.jsx)("div",{className:o().xiantext1,children:(0,s.jsx)("a",{className:o().xiantext2,onClick:()=>{u(),location.reload()},children:"退出登录"})})})]})}):(0,s.jsx)(N(),{className:o().daohangbiaoqian,href:"/about/denglu/",children:"宝贝,请登录 注册免费"}),(0,s.jsx)("li",{className:o().daohangbiaoqian,children:"网页无障碍(待做)"})]}),(0,s.jsxs)("ul",{className:o().daohang3,children:[(0,s.jsxs)("li",{className:o().daohangbiaoqian,children:[c,",",r]}),(0,s.jsx)("li",{className:o().daohangbiaoqian,children:l?(0,s.jsx)(N(),{href:"/about/gouwuche/?id=".concat(t),prefetch:!0,className:o().shouchang,children:"购物车"}):(0,s.jsx)(N(),{href:"/about/denglu/",prefetch:!0,className:o().shouchang,children:"购物车"})}),(0,s.jsxs)("li",{className:o().daohangbiaoqian,children:[(0,s.jsx)("span",{className:o().shouchang,children:"收藏(待做)"}),(0,s.jsx)("span",{className:o().jiantou,children:">"}),(0,s.jsx)("div",{className:o().xiantext,children:(0,s.jsxs)("div",{className:o().xiantext1,children:[(0,s.jsx)("a",{className:o().xiantext2,children:"收藏的商品"}),(0,s.jsx)("a",{className:o().xiantext2,children:"收藏的店铺"})]})})]}),(0,s.jsx)("li",{className:o().daohangbiaoqian,children:"卖家中心(待做)"})]})]})})})}function L(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:u().shousuo,children:(0,s.jsxs)("div",{className:u().top,children:[(0,s.jsx)("a",{className:u().geitupianyong,children:(0,s.jsx)(i.default,{src:"/image/download.png",alt:"taobao",layout:"fill",objectFit:"contain"})}),(0,s.jsx)("div",{className:u().shousuolan,children:(0,s.jsx)("button",{className:u().shousuoanliu,children:"搜索"})})]})})})}function T(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:r().xiaodaohang,children:(0,s.jsxs)("div",{className:r().xiaodaohang1,children:[(0,s.jsx)("a",{className:r().xiaodaohang2,children:"天猫"}),(0,s.jsx)("a",{className:r().xiaodaohang2,children:"淘宝直播"}),(0,s.jsx)("a",{className:r().xiaodaohang2,children:"司法拍卖"}),(0,s.jsx)("a",{className:r().xiaodaohang3,children:"天猫超市"}),(0,s.jsx)("a",{className:r().xiaodaohang4,children:"闲鱼集市"}),(0,s.jsx)("a",{className:r().xiaodaohang4,children:"天猫国际"})]})})})}function C(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:d().div}),(0,s.jsx)("div",{className:d().div1}),(0,s.jsx)("div",{className:d().div2}),(0,s.jsx)("div",{className:d().div3})]})})}}},a=>{var n=n=>a(a.s=n);a.O(0,[160,604,355,441,684,358],()=>n(127)),_N_E=a.O()}]);