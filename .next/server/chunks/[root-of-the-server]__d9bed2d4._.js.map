{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file://D%3A/vs%20code/wang%20zhan%20zhi%20zuo/my-app/src/lib/db.ts/user.ts"],"sourcesContent":["interface Cart{\r\n  id:number\r\n  shu:number\r\n\r\n}\r\ninterface s {\r\n  id:number\r\n  shuju:Cart[]\r\n}\r\n let users: any[] = []\r\nexport let shangpingshuju:s[] = []\r\nexport const db = {\r\n  // 查找用户\r\n  findUser: (email: any) => users.find(user => user.email === email),\r\n  // 创建用户\r\n  createUser: (email: any, password: any) => {\r\n    const user = { \r\n      email,\r\n      password\r\n    };\r\n    users.push(user);\r\n  },\r\n  // 验证用户\r\n  authenticate: (email: any, password: any) => {\r\n    const user = users.find(u => u.email === email);\r\n    const zhuangtai = user && user.password === password ? true :false;\r\n    return zhuangtai\r\n  },\r\n  putshangping:(email:any,id:string)=>{\r\n    const sang = users.find(i=>i.email ===email)\r\n    if(sang) sang.id=id\r\n  },\r\n  // 用户购物车\r\n  gouwuche1:(id:number,chaozhuo:string,uid:number)=>{\r\n     const ss = shangpingshuju.find((u:s)=>u.id==uid)\r\n     if(ss){\r\n      const s = ss.shuju.find((u:any)=>u.id==id)\r\n      if(s)\r\n      if(chaozhuo ==\"加\")\r\n      ss.shuju = ss.shuju.map((s)=>s.id==id?{id:id,shu:s.shu+1}:s)\r\n      else{\r\n      ss.shuju = ss.shuju.map((s)=>s.id==id?{id:id,shu:s.shu-1}:s)\r\n      ss.shuju.filter((n)=>n.shu!=0)\r\n      }\r\n      else{\r\n        ss.shuju.push({id:id,shu:1})\r\n      }\r\n     }\r\n     else{\r\n      shangpingshuju.push({id:uid,shuju:[{id:id,shu:1}]})\r\n    }\r\n    return ss?.shuju\r\n  },\r\n  goucu:(id:number)=>{\r\n    const s = shangpingshuju.find((u:any)=>u.id==id)\r\n    if(s!=null) return s\r\n    return false\r\n  } ,\r\n}\r\n"],"names":[],"mappings":";;;;AASC,IAAI,QAAe,EAAE;AACf,IAAI,iBAAqB,EAAE;AAC3B,MAAM,KAAK;IAChB,OAAO;IACP,UAAU,CAAC,QAAe,MAAM,IAAI,CAAC,CAAA,OAAQ,KAAK,KAAK,KAAK;IAC5D,OAAO;IACP,YAAY,CAAC,OAAY;QACvB,MAAM,OAAO;YACX;YACA;QACF;QACA,MAAM,IAAI,CAAC;IACb;IACA,OAAO;IACP,cAAc,CAAC,OAAY;QACzB,MAAM,OAAO,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK;QACzC,MAAM,YAAY,QAAQ,KAAK,QAAQ,KAAK,WAAW,OAAM;QAC7D,OAAO;IACT;IACA,cAAa,CAAC,OAAU;QACtB,MAAM,OAAO,MAAM,IAAI,CAAC,CAAA,IAAG,EAAE,KAAK,KAAI;QACtC,IAAG,MAAM,KAAK,EAAE,GAAC;IACnB;IACA,QAAQ;IACR,WAAU,CAAC,IAAU,UAAgB;QAClC,MAAM,KAAK,eAAe,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,IAAE;QAC5C,IAAG,IAAG;YACL,MAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC,IAAQ,EAAE,EAAE,IAAE;YACvC,IAAG,GACH,IAAG,YAAW,KACd,GAAG,KAAK,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,IAAE,KAAG;oBAAC,IAAG;oBAAG,KAAI,EAAE,GAAG,GAAC;gBAAC,IAAE;iBACtD;gBACJ,GAAG,KAAK,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,IAAE,KAAG;wBAAC,IAAG;wBAAG,KAAI,EAAE,GAAG,GAAC;oBAAC,IAAE;gBAC1D,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,GAAG,IAAE;YAC5B;iBACI;gBACF,GAAG,KAAK,CAAC,IAAI,CAAC;oBAAC,IAAG;oBAAG,KAAI;gBAAC;YAC5B;QACD,OACI;YACH,eAAe,IAAI,CAAC;gBAAC,IAAG;gBAAI,OAAM;oBAAC;wBAAC,IAAG;wBAAG,KAAI;oBAAC;iBAAE;YAAA;QACnD;QACA,OAAO,IAAI;IACb;IACA,OAAM,CAAC;QACL,MAAM,IAAI,eAAe,IAAI,CAAC,CAAC,IAAQ,EAAE,EAAE,IAAE;QAC7C,IAAG,KAAG,MAAM,OAAO;QACnB,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file://D%3A/vs%20code/wang%20zhan%20zhi%20zuo/my-app/src/lib/Redis/db.ts"],"sourcesContent":["import { Redis } from \"@upstash/redis\";\r\n\r\nexport const redis = new Redis({\r\n    url:'https://enormous-unicorn-51679.upstash.io',\r\n    token:'AcnfAAIjcDE1ZWY5Nzc5YzQzOGQ0NGI4ODE4ZTMxNDAwNGRlNGM3ZHAxMA'\r\n})\r\n"],"names":[],"mappings":";;;AAAA;AAAA;;AAEO,MAAM,QAAQ,IAAI,+JAAA,CAAA,QAAK,CAAC;IAC3B,KAAI;IACJ,OAAM;AACV","debugId":null}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file://D%3A/vs%20code/wang%20zhan%20zhi%20zuo/my-app/src/app/api/gouwuche/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { db,shangpingshuju }from \"@/lib/db.ts/user\";\r\nimport { redis } from \"@/lib/Redis/db\";\r\ninterface ges{\r\n    id:number\r\n    shuju:any\r\n    banben:number\r\n}\r\nexport async function POST(request:Request) {\r\n    const {searchParams} = new URL(request.url)\r\n    const uid = parseInt(searchParams.get('id')||'null')\r\n    let cz:any = parseInt(searchParams.get('cz')||'true')\r\n    if(cz){ await redis.flushdb();cz=false;return NextResponse.json({cz})}\r\n    else{\r\n    const {id,chaozhuo,banben} = await request.json()\r\n    const key = `key:${id}`\r\n    const a:any = await redis.get(key)\r\n    if(!a){ \r\n        await redis.set(key,JSON.stringify({id:id,chaozhuo:chaozhuo,banben:0}))\r\n        db.gouwuche1(id,chaozhuo,uid)\r\n    }\r\n    else if(a.banben ==(banben-1)){\r\n        await redis.set(key,JSON.stringify({id:id,chaozhuo:chaozhuo,banben:banben}))\r\n        db.gouwuche1(id,chaozhuo,uid)\r\n    }\r\n    else {\r\n       return NextResponse.json({\r\n      kehubanben:banben,\r\n      banben:a.banben,\r\n      id:id,\r\n      chaozhuo:chaozhuo\r\n    }, { status: 409 });\r\n    }\r\n     const s =shangpingshuju\r\n    return NextResponse.json({\r\n      banben:banben,\r\n      id:id,\r\n      s\r\n    });\r\n}\r\n}\r\nexport async function GET(request:Request) {\r\n    const {searchParams} = new URL(request.url)\r\n    const id = parseInt(searchParams.get('id')||'null')\r\n    const ss = db.goucu(id)\r\n    return NextResponse.json({\r\n       ss\r\n    })\r\n}\r\nasync function luanxuchuli(banben:number,key:string,chaozhuo:string,id:number,uid:number){\r\n    const newkey = key+(banben-1)\r\n    const chongshi  = await redis.get(newkey)\r\n    if(chongshi){ db.gouwuche1(id,chaozhuo,uid)\r\n        return true\r\n    }\r\n    else false\r\n    \r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAMO,eAAe,KAAK,OAAe;IACtC,MAAM,EAAC,YAAY,EAAC,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC1C,MAAM,MAAM,SAAS,aAAa,GAAG,CAAC,SAAO;IAC7C,IAAI,KAAS,SAAS,aAAa,GAAG,CAAC,SAAO;IAC9C,IAAG,IAAG;QAAE,MAAM,2HAAA,CAAA,QAAK,CAAC,OAAO;QAAG,KAAG;QAAM,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAC;QAAE;IAAE,OACjE;QACJ,MAAM,EAAC,EAAE,EAAC,QAAQ,EAAC,MAAM,EAAC,GAAG,MAAM,QAAQ,IAAI;QAC/C,MAAM,MAAM,CAAC,IAAI,EAAE,IAAI;QACvB,MAAM,IAAQ,MAAM,2HAAA,CAAA,QAAK,CAAC,GAAG,CAAC;QAC9B,IAAG,CAAC,GAAE;YACF,MAAM,2HAAA,CAAA,QAAK,CAAC,GAAG,CAAC,KAAI,KAAK,SAAS,CAAC;gBAAC,IAAG;gBAAG,UAAS;gBAAS,QAAO;YAAC;YACpE,gIAAA,CAAA,KAAE,CAAC,SAAS,CAAC,IAAG,UAAS;QAC7B,OACK,IAAG,EAAE,MAAM,IAAI,SAAO,GAAG;YAC1B,MAAM,2HAAA,CAAA,QAAK,CAAC,GAAG,CAAC,KAAI,KAAK,SAAS,CAAC;gBAAC,IAAG;gBAAG,UAAS;gBAAS,QAAO;YAAM;YACzE,gIAAA,CAAA,KAAE,CAAC,SAAS,CAAC,IAAG,UAAS;QAC7B,OACK;YACF,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAC1B,YAAW;gBACX,QAAO,EAAE,MAAM;gBACf,IAAG;gBACH,UAAS;YACX,GAAG;gBAAE,QAAQ;YAAI;QACjB;QACC,MAAM,IAAG,gIAAA,CAAA,iBAAc;QACxB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACvB,QAAO;YACP,IAAG;YACH;QACF;IACJ;AACA;AACO,eAAe,IAAI,OAAe;IACrC,MAAM,EAAC,YAAY,EAAC,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC1C,MAAM,KAAK,SAAS,aAAa,GAAG,CAAC,SAAO;IAC5C,MAAM,KAAK,gIAAA,CAAA,KAAE,CAAC,KAAK,CAAC;IACpB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QACtB;IACH;AACJ;AACA,eAAe,YAAY,MAAa,EAAC,GAAU,EAAC,QAAe,EAAC,EAAS,EAAC,GAAU;IACpF,MAAM,SAAS,MAAI,CAAC,SAAO,CAAC;IAC5B,MAAM,WAAY,MAAM,2HAAA,CAAA,QAAK,CAAC,GAAG,CAAC;IAClC,IAAG,UAAS;QAAE,gIAAA,CAAA,KAAE,CAAC,SAAS,CAAC,IAAG,UAAS;QACnC,OAAO;IACX,OACK;AAET","debugId":null}}]
}