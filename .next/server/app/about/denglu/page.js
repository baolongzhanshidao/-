(()=>{var e={};e.id=522,e.ids=[522],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1438:(e,n,t)=>{Promise.resolve().then(t.bind(t,1773))},1450:(e,n,t)=>{"use strict";t.r(n),t.d(n,{GlobalError:()=>a.a,__next_app__:()=>h,pages:()=>d,routeModule:()=>p,tree:()=>l});var s=t(5239),r=t(8088),o=t(8170),a=t.n(o),i=t(893),u={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>i[e]);t.d(n,u);let l={children:["",{children:["about",{children:["denglu",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1550)),"D:\\vs code\\wang zhan zhi zuo\\my-app\\src\\app\\about\\denglu\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,4431)),"D:\\vs code\\wang zhan zhi zuo\\my-app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["D:\\vs code\\wang zhan zhi zuo\\my-app\\src\\app\\about\\denglu\\page.tsx"],h={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/about/denglu/page",pathname:"/about/denglu",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},1550:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>o});var s=t(7413),r=t(1773);function o(){return(0,s.jsx)(r.default,{})}},1630:e=>{"use strict";e.exports=require("http")},1773:(e,n,t)=>{"use strict";t.d(n,{default:()=>s});let s=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\vs code\\\\wang zhan zhi zuo\\\\my-app\\\\src\\\\components\\\\denglu\\\\denglu.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\vs code\\wang zhan zhi zuo\\my-app\\src\\components\\denglu\\denglu.tsx","default")},1791:(e,n,t)=>{Promise.resolve().then(t.t.bind(t,6346,23)),Promise.resolve().then(t.t.bind(t,7924,23)),Promise.resolve().then(t.t.bind(t,5656,23)),Promise.resolve().then(t.t.bind(t,99,23)),Promise.resolve().then(t.t.bind(t,8243,23)),Promise.resolve().then(t.t.bind(t,8827,23)),Promise.resolve().then(t.t.bind(t,2763,23)),Promise.resolve().then(t.t.bind(t,7173,23))},1820:e=>{"use strict";e.exports=require("os")},2412:e=>{"use strict";e.exports=require("assert")},2809:()=>{},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},3997:e=>{"use strict";e.exports=require("tty")},4075:e=>{"use strict";e.exports=require("zlib")},4431:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>l,metadata:()=>u});var s=t(7413),r=t(2376),o=t.n(r),a=t(8726),i=t.n(a);t(5692);let u={title:"Create Next App",description:"Generated by create next app"};function l({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:`${o().variable} ${i().variable} antialiased`,children:e})})}},4486:(e,n,t)=>{Promise.resolve().then(t.bind(t,7495))},4735:e=>{"use strict";e.exports=require("events")},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},5692:()=>{},6189:(e,n,t)=>{"use strict";var s=t(5773);t.o(s,"useRouter")&&t.d(n,{useRouter:function(){return s.useRouter}})},6291:(e,n,t)=>{"use strict";let s;t.d(n,{P:()=>u});var r=t(6787),o=t(1060);let a=(e,n)=>({shangping:[],diaodu:!0,gianche:e=>{n().huanchun&&n().chongshi(e)},time:0,wangluo:!0,huanchun:[],chongshi:async t=>{let{huanchun:s}=n(),r=[...s].sort((e,n)=>e.banben-n.banben),a=r.find(e=>!1==e.is);for(let i of(console.log(a),r)){if(!n().diaodu)break;e({diaodu:!1});let r=async()=>{try{await o.A.post(`/api/gouwuche?id=${t}`,{id:a.key,chaozhuo:a.chaozhuo,banben:a.banben}).then(e=>console.log(e.data,"成功",s)),e({huanchun:n().huanchun.filter(e=>e.banben!=a.banben)}),e({diaodu:!0}),n().gianche(t)}catch(s){alert("超时，刷新浏览器试试"),"加"==a.chaozhuo?e(e=>({shangping:e.shangping.map(e=>e.id==a.key?{id:e.id,shu:e.shu-1,banben:e.banben}:e),chong:a})):e(e=>({shangping:e.shangping.map(e=>e.id==a.key?{id:e.id,shu:e.shu+1,banben:e.banben}:e),chong:a})),e({diaodu:!0}),n().gianche(t)}};setTimeout(()=>r(),3e3)}},settongbu:async()=>{let t=n().user;try{let n=await o.A.get(`/api/gouwuche?id=${t}`).then(e=>e.data);console.log(n),n.ss&&(n.ss.shuju=n.ss.shuju.map(e=>({id:e.id,shu:e.shu,banben:-1})),console.log(n.ss.shuju),e(()=>({shangping:n.ss.shuju})))}catch(e){console.log(e)}},shangpingjia:async t=>{if(!n().wangluo||Date.now()-n().time<500)return;e(e=>{e.time=Date.now();let n=e.shangping.find(e=>e.id==t);return(console.log(n),n)?{shangping:e.shangping.map(e=>e.id==t?{id:t,shu:e.shu+1,banben:e.banben+1}:e)}:{shangping:[...e.shangping,{id:t,shu:1,banben:0}]}});let s=n().user,r=n().shangping.find(e=>e.id==t);try{await o.A.post(`/api/gouwuche?id=${s}`,{id:t,chaozhuo:"加",banben:r.banben}).then(e=>{e.data,console.log(e.data)})}catch(r){if(console.log(r),o.A.isAxiosError(r))if(409==r.request.status){alert("超时，稍等"),console.log("版本冲突正在重试",r.response?.data);let t=r.response?.data;e(e=>({huanchun:[...e.huanchun,{is:!1,key:t.id,banben:t.kehubanben,oldbanben:t.banben,chaozhuo:t.chaozhuo}]})),console.log(n().huanchun),console.log(n().shangping),n().chongshi(s)}else alert("错误请重试"),e(e=>e.shangping.find(e=>e.id===t).shu<=1?{shangping:e.shangping.filter(e=>1!=e.shu)}:{shangping:e.shangping.map(e=>e.id==t?{id:t,shu:e.shu-1,banben:e.banben-1}:e)})}},shangpingjian:async t=>{if(n().shangping.find(e=>e.id==t).shu<=1)return alert("减不了了");if(!n().wangluo||Date.now()-n().time<500)return;e(e=>({shangping:e.shangping.map(e=>e.id==t?{id:t,shu:e.shu-1,banben:e.banben+1}:e)}));let s=n().user,r=n().shangping.find(e=>e.id==t);try{await o.A.post(`/api/gouwuche?id=${s}`,{id:t,chaozhuo:"减",banben:r.banben}).then(e=>{e.data,console.log(e.data)})}catch(r){if(console.log(r),o.A.isAxiosError(r))if(409==r.request.status){console.log("版本冲突正在重试",r.response?.data);let t=r.response?.data;e(e=>({huanchun:[...e.huanchun,{is:!1,key:t.id,banben:t.kehubanben,oldbanben:t.banben,chaozhuo:t.chaozhuo}]})),console.log(n().huanchun),console.log(n().shangping),n().chongshi(s)}else alert("错误请重试"),e(e=>({shangping:e.shangping.map(e=>e.id==t?{id:t,shu:e.shu+1}:e)}))}}}),i=(e,n)=>({user:null,isLoggedIn:!1,log:()=>{e({isLoggedIn:!0}),n().settongbu(),o.A.post("/api/gouwuche?cz=1").then(e=>console.log(e.data))},logout:()=>e({isLoggedIn:!1,user:null}),setuser:n=>e({user:n})}),u=(0,r.v)((s=(e,n)=>({...a(e,n),...i(e,n)}),(e,n,t)=>s(n=>(window.addEventListener("offline",()=>e({wangluo:!1})),window.addEventListener("online",()=>e({wangluo:!0})),e(n)),n,t)))},7495:(e,n,t)=>{"use strict";t.d(n,{default:()=>u});var s=t(687),r=t(3210),o=t(1060),a=t(6291),i=t(6189);function u(){let[e,n]=(0,r.useState)(""),[t,u]=(0,r.useState)(""),l=(0,a.P)(e=>e.log),d=(0,a.P)(e=>e.setuser),h=(0,i.useRouter)();return(0,s.jsxs)("form",{className:"space-y-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"用户名",value:e,onChange:e=>n(e.target.value),className:"block w-full p-2 border rounded",maxLength:2}),(0,s.jsx)("input",{type:"password",placeholder:"密码",value:t,onChange:e=>u(e.target.value),className:"block w-full p-2 border rounded",maxLength:8}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600",onClick:n=>{n.preventDefault(),o.A.post(`/api/denglu?id=${e}&password=${t}`).then(e=>{let n=e.data;console.log(n),n?alert("注册成功"):alert("注册失败,已有用户")})},children:"注册"}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600",onClick:n=>{n.preventDefault(),o.A.get(`/api/denglu?id=${e}&password=${t}`).then(n=>{let t=!!n.data&&d(e);console.log(n.data),!1!=t?(alert("登录成功"),h.back(),l()):alert("登录失败，请重试")})},children:"登录"})]})}},7657:()=>{},7879:(e,n,t)=>{Promise.resolve().then(t.t.bind(t,6444,23)),Promise.resolve().then(t.t.bind(t,6042,23)),Promise.resolve().then(t.t.bind(t,8170,23)),Promise.resolve().then(t.t.bind(t,9477,23)),Promise.resolve().then(t.t.bind(t,9345,23)),Promise.resolve().then(t.t.bind(t,2089,23)),Promise.resolve().then(t.t.bind(t,6577,23)),Promise.resolve().then(t.t.bind(t,1307,23))},7910:e=>{"use strict";e.exports=require("stream")},8354:e=>{"use strict";e.exports=require("util")},9021:e=>{"use strict";e.exports=require("fs")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var n=require("../../../webpack-runtime.js");n.C(e);var t=e=>n(n.s=e),s=n.X(0,[447,145,970],()=>t(1450));module.exports=s})();