(()=>{var e={};e.id=522,e.ids=[522],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1438:(e,t,n)=>{Promise.resolve().then(n.bind(n,1773))},1450:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>a.a,__next_app__:()=>h,pages:()=>d,routeModule:()=>p,tree:()=>l});var s=n(5239),r=n(8088),o=n(8170),a=n.n(o),i=n(893),u={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>i[e]);n.d(t,u);let l={children:["",{children:["about",{children:["denglu",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,1550)),"D:\\vs code\\wang zhan zhi zuo\\my-app\\src\\app\\about\\denglu\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,4431)),"D:\\vs code\\wang zhan zhi zuo\\my-app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(n.t.bind(n,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(n.t.bind(n,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["D:\\vs code\\wang zhan zhi zuo\\my-app\\src\\app\\about\\denglu\\page.tsx"],h={require:n,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/about/denglu/page",pathname:"/about/denglu",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},1550:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var s=n(7413),r=n(1773);function o(){return(0,s.jsx)(r.default,{})}},1630:e=>{"use strict";e.exports=require("http")},1773:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});let s=(0,n(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\vs code\\\\wang zhan zhi zuo\\\\my-app\\\\src\\\\components\\\\denglu\\\\denglu.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\vs code\\wang zhan zhi zuo\\my-app\\src\\components\\denglu\\denglu.tsx","default")},1791:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,6346,23)),Promise.resolve().then(n.t.bind(n,7924,23)),Promise.resolve().then(n.t.bind(n,5656,23)),Promise.resolve().then(n.t.bind(n,99,23)),Promise.resolve().then(n.t.bind(n,8243,23)),Promise.resolve().then(n.t.bind(n,8827,23)),Promise.resolve().then(n.t.bind(n,2763,23)),Promise.resolve().then(n.t.bind(n,7173,23))},1820:e=>{"use strict";e.exports=require("os")},2412:e=>{"use strict";e.exports=require("assert")},2809:()=>{},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},3997:e=>{"use strict";e.exports=require("tty")},4075:e=>{"use strict";e.exports=require("zlib")},4431:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l,metadata:()=>u});var s=n(7413),r=n(2376),o=n.n(r),a=n(8726),i=n.n(a);n(5692);let u={title:"Create Next App",description:"Generated by create next app"};function l({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:`${o().variable} ${i().variable} antialiased`,children:e})})}},4486:(e,t,n)=>{Promise.resolve().then(n.bind(n,7495))},4735:e=>{"use strict";e.exports=require("events")},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},5692:()=>{},6189:(e,t,n)=>{"use strict";var s=n(5773);n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}})},6291:(e,t,n)=>{"use strict";let s;n.d(t,{P:()=>u});var r=n(6787),o=n(1060);let a=(e,t)=>({shangping:[],time:0,wangluo:!0,huanchun:[],chongshi:async e=>{let{huanchun:n}=t(),s=n.find(e=>!1==e.is);setTimeout(async()=>{s.banben==s.oldbanben-1&&await o.A.post(`/api/gouwuche?id=${e}`,{id:e,chaozhuo:"加",banben:s.banben})},3e3)},settongbu:async()=>{let n=t().user;try{let t=await o.A.get(`/api/gouwuche?id=${n}`).then(e=>e.data);console.log(t),t.ss&&(t.ss.shuju=t.ss.shuju.map(e=>({id:e.id,shu:e.shu,banben:-1})),console.log(t.ss.shuju),e(()=>({shangping:t.ss.shuju})))}catch(e){console.log(e)}},shangpingjia:async n=>{if(!t().wangluo||Date.now()-t().time<500)return;e(e=>{e.time=Date.now();let t=e.shangping.find(e=>e.id==n);return(console.log(t),t)?{shangping:e.shangping.map(e=>e.id==n?{id:n,shu:e.shu+1,banben:e.banben+1}:e)}:{shangping:[...e.shangping,{id:n,shu:1,banben:0}]}});let s=t().user,r=t().shangping.find(e=>e.id==n);try{await o.A.post(`/api/gouwuche?id=${s}`,{id:n,chaozhuo:"加",banben:r.banben}).then(e=>{e.data,console.log(e.data)})}catch(s){if(console.log(s),o.A.isAxiosError(s)){if(409==s.request.status){console.log("版本冲突正在重试",s.response?.data);let n=s.response?.data;e(e=>({huanchun:e.huanchun.push({is:!1,key:`/api/gouwuche?id=${n.id}`,banben:r.banben,oldbanben:n.banben,chaozhuo:n.chaozhuo})})),t().chongshi()}}else alert("错误请重试");e(e=>e.shangping.find(e=>e.id===n).shu<=1?{shangping:e.shangping.filter(e=>1!=e.shu)}:{shangping:e.shangping.map(e=>e.id==n?{id:n,shu:e.shu-1}:e)})}},shangpingjian:async n=>{if(t().shangping.find(e=>e.id==n).shu<=1)return alert("减不了了");if(!t().wangluo||Date.now()-t().time<500)return;e(e=>({shangping:e.shangping.map(e=>e.id==n?{id:n,shu:e.shu-1,banben:e.banben+1}:e)}));let s=t().user,r=t().shangping.find(e=>e.id==n);try{await o.A.post(`/api/gouwuche?id=${s}`,{id:n,chaozhuo:"减",banben:r.banben}).then(e=>{e.data,console.log(e.data)})}catch(s){if(console.log(s),o.A.isAxiosError(s)&&409==s.request.status){console.log("版本冲突正在重试",s.response?.data);let n=s.response?.data;e(e=>({huanchun:e.huanchun.push({is:!1,key:`/api/gouwuche?id=${n.id}`,banben:r.banben,oldbanben:n.banben,chaozhuo:n.chaozhuo})})),t().chongshi()}alert("错误请重试"),e(e=>({shangping:e.shangping.map(e=>e.id==n?{id:n,shu:e.shu+1}:e)}))}}}),i=(e,t)=>({user:null,isLoggedIn:!1,log:()=>{e({isLoggedIn:!0}),t().settongbu(),o.A.post("/api/gouwuche?cz=1").then(e=>console.log(e.data))},logout:()=>e({isLoggedIn:!1,user:null}),setuser:t=>e({user:t})}),u=(0,r.v)((s=(e,t)=>({...a(e,t),...i(e,t)}),(e,t,n)=>s(t=>(window.addEventListener("offline",()=>e({wangluo:!1})),window.addEventListener("online",()=>e({wangluo:!0})),e(t)),t,n)))},7495:(e,t,n)=>{"use strict";n.d(t,{default:()=>u});var s=n(687),r=n(3210),o=n(1060),a=n(6291),i=n(6189);function u(){let[e,t]=(0,r.useState)(""),[n,u]=(0,r.useState)(""),l=(0,a.P)(e=>e.log),d=(0,a.P)(e=>e.setuser),h=(0,i.useRouter)();return(0,s.jsxs)("form",{className:"space-y-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"用户名",value:e,onChange:e=>t(e.target.value),className:"block w-full p-2 border rounded",maxLength:2}),(0,s.jsx)("input",{type:"password",placeholder:"密码",value:n,onChange:e=>u(e.target.value),className:"block w-full p-2 border rounded",maxLength:8}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600",onClick:t=>{t.preventDefault(),o.A.post(`/api/denglu?id=${e}&password=${n}`).then(e=>{let t=e.data;console.log(t),t?alert("注册成功"):alert("注册失败,已有用户")})},children:"注册"}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600",onClick:t=>{t.preventDefault(),o.A.get(`/api/denglu?id=${e}&password=${n}`).then(t=>{let n=!!t.data&&d(e);console.log(t.data),!1!=n?(alert("登录成功"),h.back(),l()):alert("登录失败，请重试")})},children:"登录"})]})}},7657:()=>{},7879:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,6444,23)),Promise.resolve().then(n.t.bind(n,6042,23)),Promise.resolve().then(n.t.bind(n,8170,23)),Promise.resolve().then(n.t.bind(n,9477,23)),Promise.resolve().then(n.t.bind(n,9345,23)),Promise.resolve().then(n.t.bind(n,2089,23)),Promise.resolve().then(n.t.bind(n,6577,23)),Promise.resolve().then(n.t.bind(n,1307,23))},7910:e=>{"use strict";e.exports=require("stream")},8354:e=>{"use strict";e.exports=require("util")},9021:e=>{"use strict";e.exports=require("fs")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),s=t.X(0,[447,145,970],()=>n(1450));module.exports=s})();