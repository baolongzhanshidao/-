(()=>{var e={};e.id=697,e.ids=[697],e.modules={346:(e,n,t)=>{"use strict";t.d(n,{default:()=>s});let s=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\vs code\\\\wang zhan zhi zuo\\\\my-app\\\\src\\\\components\\\\xiangqing\\\\xiang.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\vs code\\wang zhan zhi zuo\\my-app\\src\\components\\xiangqing\\xiang.tsx","default")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1630:e=>{"use strict";e.exports=require("http")},1791:(e,n,t)=>{Promise.resolve().then(t.t.bind(t,6346,23)),Promise.resolve().then(t.t.bind(t,7924,23)),Promise.resolve().then(t.t.bind(t,5656,23)),Promise.resolve().then(t.t.bind(t,99,23)),Promise.resolve().then(t.t.bind(t,8243,23)),Promise.resolve().then(t.t.bind(t,8827,23)),Promise.resolve().then(t.t.bind(t,2763,23)),Promise.resolve().then(t.t.bind(t,7173,23))},1820:e=>{"use strict";e.exports=require("os")},2412:e=>{"use strict";e.exports=require("assert")},2809:()=>{},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3236:(e,n,t)=>{"use strict";t.d(n,{default:()=>d});var s=t(687),r=t(5233),i=t.n(r),a=t(6291),o=t(6189),u=t(3210);function d({id:e}){let{user:n,shangpingjia:t,isLoggedIn:r}=(0,a.P)(),[d,h]=(0,u.useState)(!1),l=(0,o.useRouter)();return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:i().zhu,children:[(0,s.jsxs)("div",{className:i().shangping,children:["这是第",e,"号商品"]}),(0,s.jsx)("button",{onClick:()=>{r?t(e):l.push("/about/denglu/")},className:i().jiaru,children:"加入购物车"})]})})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},3997:e=>{"use strict";e.exports=require("tty")},4075:e=>{"use strict";e.exports=require("zlib")},4431:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d,metadata:()=>u});var s=t(7413),r=t(2376),i=t.n(r),a=t(8726),o=t.n(a);t(5692);let u={title:"Create Next App",description:"Generated by create next app"};function d({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:`${i().variable} ${o().variable} antialiased`,children:e})})}},4735:e=>{"use strict";e.exports=require("events")},5233:e=>{e.exports={shangping:"xiang_shangping__sNUQ6",jiaru:"xiang_jiaru__aUzg3",zhu:"xiang_zhu__zZv0f"}},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},5692:()=>{},6189:(e,n,t)=>{"use strict";var s=t(5773);t.o(s,"useRouter")&&t.d(n,{useRouter:function(){return s.useRouter}})},6224:(e,n,t)=>{"use strict";t.r(n),t.d(n,{GlobalError:()=>a.a,__next_app__:()=>l,pages:()=>h,routeModule:()=>p,tree:()=>d});var s=t(5239),r=t(8088),i=t(8170),a=t.n(i),o=t(893),u={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>o[e]);t.d(n,u);let d={children:["",{children:["about",{children:["xiangqing",{children:["[xiang]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6871)),"D:\\vs code\\wang zhan zhi zuo\\my-app\\src\\app\\about\\xiangqing\\[xiang]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,4431)),"D:\\vs code\\wang zhan zhi zuo\\my-app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,h=["D:\\vs code\\wang zhan zhi zuo\\my-app\\src\\app\\about\\xiangqing\\[xiang]\\page.tsx"],l={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/about/xiangqing/[xiang]/page",pathname:"/about/xiangqing/[xiang]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6291:(e,n,t)=>{"use strict";let s;t.d(n,{P:()=>u});var r=t(6787),i=t(1060);let a=(e,n)=>({shangping:[],time:0,wangluo:!0,huanchun:[],chongshi:async e=>{let{huanchun:t}=n(),s=t.find(e=>!1==e.is);setTimeout(async()=>{s.banben==s.oldbanben-1&&await i.A.post(`/api/gouwuche?id=${e}`,{id:e,chaozhuo:"加",banben:s.banben})},3e3)},settongbu:async()=>{let t=n().user;try{let n=await i.A.get(`/api/gouwuche?id=${t}`).then(e=>e.data);console.log(n),n.ss&&(n.ss.shuju=n.ss.shuju.map(e=>({id:e.id,shu:e.shu,banben:-1})),console.log(n.ss.shuju),e(()=>({shangping:n.ss.shuju})))}catch(e){console.log(e)}},shangpingjia:async t=>{if(!n().wangluo||Date.now()-n().time<500)return;e(e=>{e.time=Date.now();let n=e.shangping.find(e=>e.id==t);return(console.log(n),n)?{shangping:e.shangping.map(e=>e.id==t?{id:t,shu:e.shu+1,banben:e.banben+1}:e)}:{shangping:[...e.shangping,{id:t,shu:1,banben:0}]}});let s=n().user,r=n().shangping.find(e=>e.id==t);try{await i.A.post(`/api/gouwuche?id=${s}`,{id:t,chaozhuo:"加",banben:r.banben}).then(e=>{e.data,console.log(e.data)})}catch(s){if(console.log(s),i.A.isAxiosError(s)){if(409==s.request.status){console.log("版本冲突正在重试",s.response?.data);let t=s.response?.data;e(e=>({huanchun:e.huanchun.push({is:!1,key:`/api/gouwuche?id=${t.id}`,banben:r.banben,oldbanben:t.banben,chaozhuo:t.chaozhuo})})),n().chongshi()}}else alert("错误请重试");e(e=>e.shangping.find(e=>e.id===t).shu<=1?{shangping:e.shangping.filter(e=>1!=e.shu)}:{shangping:e.shangping.map(e=>e.id==t?{id:t,shu:e.shu-1}:e)})}},shangpingjian:async t=>{if(n().shangping.find(e=>e.id==t).shu<=1)return alert("减不了了");if(!n().wangluo||Date.now()-n().time<500)return;e(e=>({shangping:e.shangping.map(e=>e.id==t?{id:t,shu:e.shu-1,banben:e.banben+1}:e)}));let s=n().user,r=n().shangping.find(e=>e.id==t);try{await i.A.post(`/api/gouwuche?id=${s}`,{id:t,chaozhuo:"减",banben:r.banben}).then(e=>{e.data,console.log(e.data)})}catch(s){if(console.log(s),i.A.isAxiosError(s)&&409==s.request.status){console.log("版本冲突正在重试",s.response?.data);let t=s.response?.data;e(e=>({huanchun:e.huanchun.push({is:!1,key:`/api/gouwuche?id=${t.id}`,banben:r.banben,oldbanben:t.banben,chaozhuo:t.chaozhuo})})),n().chongshi()}alert("错误请重试"),e(e=>({shangping:e.shangping.map(e=>e.id==t?{id:t,shu:e.shu+1}:e)}))}}}),o=(e,n)=>({user:null,isLoggedIn:!1,log:()=>{e({isLoggedIn:!0}),n().settongbu(),i.A.post("/api/gouwuche?cz=1").then(e=>console.log(e.data))},logout:()=>e({isLoggedIn:!1,user:null}),setuser:n=>e({user:n})}),u=(0,r.v)((s=(e,n)=>({...a(e,n),...o(e,n)}),(e,n,t)=>s(n=>(window.addEventListener("offline",()=>e({wangluo:!1})),window.addEventListener("online",()=>e({wangluo:!0})),e(n)),n,t)))},6871:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>i});var s=t(7413),r=t(346);async function i({params:e}){let{xiang:n}=await e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(r.default,{id:n})})}},7657:()=>{},7879:(e,n,t)=>{Promise.resolve().then(t.t.bind(t,6444,23)),Promise.resolve().then(t.t.bind(t,6042,23)),Promise.resolve().then(t.t.bind(t,8170,23)),Promise.resolve().then(t.t.bind(t,9477,23)),Promise.resolve().then(t.t.bind(t,9345,23)),Promise.resolve().then(t.t.bind(t,2089,23)),Promise.resolve().then(t.t.bind(t,6577,23)),Promise.resolve().then(t.t.bind(t,1307,23))},7910:e=>{"use strict";e.exports=require("stream")},8354:e=>{"use strict";e.exports=require("util")},9021:e=>{"use strict";e.exports=require("fs")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9295:(e,n,t)=>{Promise.resolve().then(t.bind(t,3236))},9551:e=>{"use strict";e.exports=require("url")},9975:(e,n,t)=>{Promise.resolve().then(t.bind(t,346))}};var n=require("../../../../webpack-runtime.js");n.C(e);var t=e=>n(n.s=e),s=n.X(0,[447,145,970],()=>t(6224));module.exports=s})();