(()=>{var e={};e.id=697,e.ids=[697],e.modules={346:(e,n,s)=>{"use strict";s.d(n,{default:()=>t});let t=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\vs code\\\\wang zhan zhi zuo\\\\my-app\\\\src\\\\components\\\\xiangqing\\\\xiang.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\vs code\\wang zhan zhi zuo\\my-app\\src\\components\\xiangqing\\xiang.tsx","default")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1630:e=>{"use strict";e.exports=require("http")},1791:(e,n,s)=>{Promise.resolve().then(s.t.bind(s,6346,23)),Promise.resolve().then(s.t.bind(s,7924,23)),Promise.resolve().then(s.t.bind(s,5656,23)),Promise.resolve().then(s.t.bind(s,99,23)),Promise.resolve().then(s.t.bind(s,8243,23)),Promise.resolve().then(s.t.bind(s,8827,23)),Promise.resolve().then(s.t.bind(s,2763,23)),Promise.resolve().then(s.t.bind(s,7173,23))},1820:e=>{"use strict";e.exports=require("os")},2412:e=>{"use strict";e.exports=require("assert")},2809:()=>{},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3236:(e,n,s)=>{"use strict";s.d(n,{default:()=>h});var t=s(687),i=s(5233),r=s.n(i),a=s(6291),o=s(6189),u=s(3210);function h({id:e}){let{user:n,shangpingjia:s,isLoggedIn:i}=(0,a.P)(),[h,d]=(0,u.useState)(!1),l=(0,o.useRouter)();return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:r().zhu,children:[(0,t.jsxs)("div",{className:r().shangping,children:["这是第",e,"号商品"]}),(0,t.jsx)("button",{onClick:()=>{i?s(e):l.push("/about/denglu/")},className:r().jiaru,children:"加入购物车"})]})})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},3997:e=>{"use strict";e.exports=require("tty")},4075:e=>{"use strict";e.exports=require("zlib")},4431:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>h,metadata:()=>u});var t=s(7413),i=s(2376),r=s.n(i),a=s(8726),o=s.n(a);s(5692);let u={title:"Create Next App",description:"Generated by create next app"};function h({children:e}){return(0,t.jsx)("html",{lang:"en",children:(0,t.jsx)("body",{className:`${r().variable} ${o().variable} antialiased`,children:e})})}},4735:e=>{"use strict";e.exports=require("events")},5233:e=>{e.exports={shangping:"xiang_shangping__sNUQ6",jiaru:"xiang_jiaru__aUzg3",zhu:"xiang_zhu__zZv0f"}},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},5692:()=>{},6189:(e,n,s)=>{"use strict";var t=s(5773);s.o(t,"useRouter")&&s.d(n,{useRouter:function(){return t.useRouter}})},6224:(e,n,s)=>{"use strict";s.r(n),s.d(n,{GlobalError:()=>a.a,__next_app__:()=>l,pages:()=>d,routeModule:()=>g,tree:()=>h});var t=s(5239),i=s(8088),r=s(8170),a=s.n(r),o=s(893),u={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>o[e]);s.d(n,u);let h={children:["",{children:["about",{children:["xiangqing",{children:["[xiang]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6871)),"D:\\vs code\\wang zhan zhi zuo\\my-app\\src\\app\\about\\xiangqing\\[xiang]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4431)),"D:\\vs code\\wang zhan zhi zuo\\my-app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["D:\\vs code\\wang zhan zhi zuo\\my-app\\src\\app\\about\\xiangqing\\[xiang]\\page.tsx"],l={require:s,loadChunk:()=>Promise.resolve()},g=new t.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/about/xiangqing/[xiang]/page",pathname:"/about/xiangqing/[xiang]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:h}})},6291:(e,n,s)=>{"use strict";let t;s.d(n,{P:()=>u});var i=s(6787),r=s(1060);let a=(e,n)=>({shangping:[],diaodu:!0,gianche:e=>{n().huanchun&&n().chongshi(e)},time:0,wangluo:!0,huanchun:[],chongshi:async s=>{let{huanchun:t}=n(),i=[...t].sort((e,n)=>e.banben-n.banben),a=i.find(e=>!1==e.is);for(let o of(console.log(a),i)){if(!n().diaodu)break;e({diaodu:!1});let i=async()=>{try{await r.A.post(`/api/gouwuche?id=${s}`,{id:a.key,chaozhuo:a.chaozhuo,banben:a.banben}).then(e=>console.log(e.data,"成功",t)),e({huanchun:n().huanchun.filter(e=>e.banben!=a.banben)}),e({diaodu:!0}),n().gianche(s)}catch(t){alert("超时，刷新浏览器试试"),"加"==a.chaozhuo?e(e=>({shangping:e.shangping.map(e=>e.id==a.key?{id:e.id,shu:e.shu-1,banben:e.banben}:e),chong:a})):e(e=>({shangping:e.shangping.map(e=>e.id==a.key?{id:e.id,shu:e.shu+1,banben:e.banben}:e),chong:a})),e({diaodu:!0}),n().gianche(s)}};setTimeout(()=>i(),3e3)}},settongbu:async()=>{let s=n().user;try{let n=await r.A.get(`/api/gouwuche?id=${s}`).then(e=>e.data);console.log(n),n.ss&&(n.ss.shuju=n.ss.shuju.map(e=>({id:e.id,shu:e.shu,banben:-1})),console.log(n.ss.shuju),e(()=>({shangping:n.ss.shuju})))}catch(e){console.log(e)}},shangpingjia:async s=>{if(!n().wangluo||Date.now()-n().time<500)return;e(e=>{e.time=Date.now();let n=e.shangping.find(e=>e.id==s);return(console.log(n),n)?{shangping:e.shangping.map(e=>e.id==s?{id:s,shu:e.shu+1,banben:e.banben+1}:e)}:{shangping:[...e.shangping,{id:s,shu:1,banben:0}]}});let t=n().user,i=n().shangping.find(e=>e.id==s);try{await r.A.post(`/api/gouwuche?id=${t}`,{id:s,chaozhuo:"加",banben:i.banben}).then(e=>{e.data,console.log(e.data)})}catch(i){if(console.log(i),r.A.isAxiosError(i))if(409==i.request.status){alert("超时，稍等"),console.log("版本冲突正在重试",i.response?.data);let s=i.response?.data;e(e=>({huanchun:[...e.huanchun,{is:!1,key:s.id,banben:s.kehubanben,oldbanben:s.banben,chaozhuo:s.chaozhuo}]})),console.log(n().huanchun),console.log(n().shangping),n().chongshi(t)}else alert("错误请重试"),e(e=>e.shangping.find(e=>e.id===s).shu<=1?{shangping:e.shangping.filter(e=>1!=e.shu)}:{shangping:e.shangping.map(e=>e.id==s?{id:s,shu:e.shu-1,banben:e.banben-1}:e)})}},shangpingjian:async s=>{if(n().shangping.find(e=>e.id==s).shu<=1)return alert("减不了了");if(!n().wangluo||Date.now()-n().time<500)return;e(e=>({shangping:e.shangping.map(e=>e.id==s?{id:s,shu:e.shu-1,banben:e.banben+1}:e)}));let t=n().user,i=n().shangping.find(e=>e.id==s);try{await r.A.post(`/api/gouwuche?id=${t}`,{id:s,chaozhuo:"减",banben:i.banben}).then(e=>{e.data,console.log(e.data)})}catch(i){if(console.log(i),r.A.isAxiosError(i))if(409==i.request.status){console.log("版本冲突正在重试",i.response?.data);let s=i.response?.data;e(e=>({huanchun:[...e.huanchun,{is:!1,key:s.id,banben:s.kehubanben,oldbanben:s.banben,chaozhuo:s.chaozhuo}]})),console.log(n().huanchun),console.log(n().shangping),n().chongshi(t)}else alert("错误请重试"),e(e=>({shangping:e.shangping.map(e=>e.id==s?{id:s,shu:e.shu+1}:e)}))}}}),o=(e,n)=>({user:null,isLoggedIn:!1,log:()=>{e({isLoggedIn:!0}),n().settongbu(),r.A.post("/api/gouwuche?cz=1").then(e=>console.log(e.data))},logout:()=>e({isLoggedIn:!1,user:null}),setuser:n=>e({user:n})}),u=(0,i.v)((t=(e,n)=>({...a(e,n),...o(e,n)}),(e,n,s)=>t(n=>(window.addEventListener("offline",()=>e({wangluo:!1})),window.addEventListener("online",()=>e({wangluo:!0})),e(n)),n,s)))},6871:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>r,generateStaticParams:()=>a});var t=s(7413),i=s(346);async function r({params:e}){let{xiang:n}=await e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.default,{id:n})})}async function a(){return[1,2,3,4,5,6].map(e=>({id:e}))}},7657:()=>{},7879:(e,n,s)=>{Promise.resolve().then(s.t.bind(s,6444,23)),Promise.resolve().then(s.t.bind(s,6042,23)),Promise.resolve().then(s.t.bind(s,8170,23)),Promise.resolve().then(s.t.bind(s,9477,23)),Promise.resolve().then(s.t.bind(s,9345,23)),Promise.resolve().then(s.t.bind(s,2089,23)),Promise.resolve().then(s.t.bind(s,6577,23)),Promise.resolve().then(s.t.bind(s,1307,23))},7910:e=>{"use strict";e.exports=require("stream")},8354:e=>{"use strict";e.exports=require("util")},9021:e=>{"use strict";e.exports=require("fs")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9295:(e,n,s)=>{Promise.resolve().then(s.bind(s,3236))},9551:e=>{"use strict";e.exports=require("url")},9975:(e,n,s)=>{Promise.resolve().then(s.bind(s,346))}};var n=require("../../../../webpack-runtime.js");n.C(e);var s=e=>n(n.s=e),t=n.X(0,[447,145,970],()=>s(6224));module.exports=t})();